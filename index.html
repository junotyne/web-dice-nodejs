<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Dice Roller API Test</title>
  <style>
	#urlInput {
            width: 500px; 
            padding: 10px;
            font-size: 14px;
        }
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    pre {
      background: #f4f4f4;
      padding: 15px;
      border-radius: 5px;
    }
  </style>
</head>
<body>

  <h2>Dice Roller API â€“ Test Page</h2>
  <p>This page automatically sends a request to the Dice Roller API.</p>

  <pre id="output">Waiting for response...</pre>

  <label for="urlInput">MERNa Server URL:</label><br />
	<input type="text" id="urlInput" placeholder="Enter the URL of your remote MERNa server here..."><br /><br />

	<button onclick="testMERNaServerConnection()">Test MERNa Server Connection</button>
	<div id="ping"></div><br /><br />

	<script>
		async function testMERNaServerConnection() {
			const pingField = document.getElementById("ping");
			pingField.innerHTML = "";
			var div = document.getElementById('testingDiv');
			div.style.display = 'none';

			const url = document.getElementById("urlInput").value + "/api/ping";
			const response = await fetch(url);
			const pingResponse = await response.text();

			if (pingResponse === 'ping response') {
				pingField.innerHTML = "Success!";
				var div = document.getElementById('testingDiv');
				div.style.display = 'block';
			} 
		}
	</script>

  <script>
    const requestData = {
      diceRollRequest: {
        dice: [
          { type: "d4", count: 2 },
          { type: "d6", count: 1 },
          { type: "d20", count: 1 }
        ]
      },
      constraints: {
        minDice: 1,
        maxDice: 5
      }
    };

    fetch("https://your-server-url/api/roll", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(requestData)
    })
      .then(response => {
        if (!response.ok) {
          throw new Error("API request failed");
        }
        return response.json();
      })
      .then(data => {
        document.getElementById("output").textContent =
          JSON.stringify(data, null, 2);
      })
      .catch(error => {
        document.getElementById("output").textContent =
          "Error: " + error.message;
      });
  </script>

</body>
</html>
